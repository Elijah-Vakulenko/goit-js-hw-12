{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export async function getImages(query, page = 1) {\n    const params = new URLSearchParams({\n        key: '44023178-1b17cf85b995cf2d6fd44a474', // ← Персональний ключ\n        q: query, //← Введений нами запит\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    });\n    \n    try {\n        const imageRequest = await axios.get(`https://pixabay.com/api/?${params}`)\n        return imageRequest.data; //← виводимо отриману інформацію з серверу\n    } catch(error) {\n                showNoResultsMessage()\n        console.error(\"Error fetching images:\", error);\n    };\n};\n\n    ","\nfunction imageTamplate(image) {\n    return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\"\n          ><img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"\n        /></a>\n        <ul class=\"image-description\">\n          <li class=\"info-item\">\n            <h3 class=\"info-title\">Likes</h3>\n            <p class=\"info-value\">${image.likes}</p>\n          </li>\n          <li class=\"info-item\">\n            <h3 class=\"info-title\">Views</h3>\n            <p class=\"info-value\">${image.views}</p>\n          </li>\n          <li class=\"info-item\">\n            <h3 class=\"info-title\">Comments</h3>\n            <p class=\"info-value\">${image.comments}</p>\n          </li>\n          <li class=\"info-item\">\n            <h3 class=\"info-title\">Downloads</h3>\n            <p class=\"info-value\">${image.downloads}</p>\n          </li>\n        </ul>\n      </li>`\n}\n\nexport function galleryRender(array) {\n    return array.map(imageTamplate).join('');\n    }\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\nimport { getImages } from './js/pixabay-api.js'; //← функція фетчу зображень з серверу\nimport { galleryRender} from './js/render-functions.js'; //← імпорт функції рендеру\n\n//===============================================================================\n// імпорт DOM елементів\n\nconst refs = {\n    form: document.querySelector('.search-form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more'),\n}\n\nlet currentPage = 1; //← відображаємо номер поточної сторінки (після кожних 15 фото завантажуємо наступні 15, тобто додаємо нову сторінку)\n\n// //===============================================================================\n// // Налаштовуємо SimpleLightbox\n\nfunction initilizeLightbox() {\n    let lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    });\n    \n     lightbox.refresh();\n}\n// //===============================================================================\n// //IziToast notifications:\n\nfunction showNoResultsMessage() { //функц. для помилки пошуку\n    iziToast.error({\n        title: 'Error!',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: \"center\",\n        messageColor: 'white',\n        backgroundColor: '#ff3d00',\n        progressBarColor: '#B51B1B',\n    });\n}\n\nfunction endOfSearchResults() { // функц. для к1нця пошуку\n    iziToast.warning({\n        title: 'Caution!',\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: \"center\",\n        messageColor: 'white',\n        backgroundColor: '#2D4841',\n        progressBarColor: '#658474',\n    });\n}\n//=================================================================================\n//Скрол вниз \nfunction getBoundingClientRect() {\n    window.scrollBy(0, window.innerHeight);\n\n}\n\n// //===============================================================================\n// // Налаштовуємо слухач подій та визначаємо, що буде відбуватися при запиті\n\nrefs.form.addEventListener('submit', event => {\n    event.preventDefault();\n    const query = event.target.elements.query.value.trim();\n    currentPage = 1;\n\n    refs.loader.classList.remove('is-hidden'); //← видаляємо клас visually hidden щоб показати, що йде пошук, сторінка чекає на завантаження даних.\n    \n    getImages(query).then(data => {\n           if (data.hits.length === 0) {\n            // якщо немає результатів пошуку:\n               if (refs.loadMoreBtn) {\n                    refs.loadMoreBtn.remove(); // ← видаляю кнопку load more\n                }\n               showNoResultsMessage(); //← запускаємо функцію оповіщення від iziToast;\n               refs.gallery.innerHTML = '';//← очищуємо галерею, якщо там лишився результат минулого пошуку;\n        } else {\n            //Якщо пошук за ключем дає результат, запускаємо рендер та виводимо зображення за допомогою Lightbox\n            const markup = galleryRender(data.hits);\n            refs.gallery.innerHTML = markup;\n               initilizeLightbox(); //← підключаємо Лайтбокс\n\n               //Тепер, після того як в нас вже завантажилися 20 зображень, ми створюємо кнопку \"Завантажити ще\"\n\n\n               if (data.totalHits > 15) {\n                refs.loadMoreBtn.classList.remove('is-hidden');\n                refs.loadMoreBtn.addEventListener('click', loadMoreImages); // ← Викликаємо функцію завантаження наступних 20 зображень\n            }\n        }\n        // Ховаємо індикатор завантаження даних після завантаження зображень\n        refs.loader.classList.add('is-hidden');\n    });\n});\n\n//============================================================================\n// Додаємо наступну сторінку з 15ма зображеннями при кліку по кнопці\n\nfunction loadMoreImages() {\n    currentPage++; \n    const query = refs.form.elements.query.value.trim();\n\n    refs.loader.classList.remove('is-hidden');\n\n    getImages(query, currentPage).then(data => {\n        if (data.hits.length === 0) {\n            showNoResultsMessage();\n        } else {\n            const markup = galleryRender(data.hits);\n            refs.gallery.insertAdjacentHTML('beforeend', markup);\n            refs.loader.classList.add('is-hidden');\n        };\n    });\n};"],"names":["getImages","query","page","params","error","imageTamplate","image","galleryRender","array","refs","currentPage","initilizeLightbox","SimpleLightbox","showNoResultsMessage","iziToast","event","data","markup","loadMoreImages"],"mappings":"6vBAAO,eAAeA,EAAUC,EAAOC,EAAO,EAAG,CAC7C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,CAAK,EAED,GAAI,CAEA,OADqB,MAAM,MAAM,IAAI,4BAA4BC,CAAM,EAAE,GACrD,IACvB,OAAOC,EAAO,CACH,qBAAsB,EAC9B,QAAQ,MAAM,yBAA0BA,CAAK,CAErD,CAAA,CCjBA,SAASC,EAAcC,EAAO,CAC1B,MAAO;AAAA,wCAC6BA,EAAM,aAAa;AAAA,6CACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,oCAK/CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,oCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,YAInD,CAEO,SAASC,EAAcC,EAAO,CACjC,OAAOA,EAAM,IAAIH,CAAa,EAAE,KAAK,EAAE,CAC3C,CCfA,MAAMI,EAAO,CACT,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,YAAY,CACpD,EAEA,IAAIC,EAAc,EAKlB,SAASC,GAAoB,CACV,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,gBAAiB,QACrB,CAAK,EAES,QAAO,CACrB,CAIA,SAASC,GAAuB,CAC5BC,EAAS,MAAM,CACX,MAAO,SACP,QAAS,2EACT,SAAU,SACV,aAAc,QACd,gBAAiB,UACjB,iBAAkB,SAC1B,CAAK,CACL,CAsBAL,EAAK,KAAK,iBAAiB,SAAUM,GAAS,CAC1CA,EAAM,eAAc,EACpB,MAAMd,EAAQc,EAAM,OAAO,SAAS,MAAM,MAAM,OAChDL,EAAc,EAEdD,EAAK,OAAO,UAAU,OAAO,WAAW,EAExCT,EAAUC,CAAK,EAAE,KAAKe,GAAQ,CACvB,GAAIA,EAAK,KAAK,SAAW,EAEjBP,EAAK,aACJA,EAAK,YAAY,SAEtBI,IACAJ,EAAK,QAAQ,UAAY,OACzB,CAEH,MAAMQ,EAASV,EAAcS,EAAK,IAAI,EACtCP,EAAK,QAAQ,UAAYQ,EACtBN,IAKIK,EAAK,UAAY,KACpBP,EAAK,YAAY,UAAU,OAAO,WAAW,EAC7CA,EAAK,YAAY,iBAAiB,QAASS,CAAc,EAEhE,CAEDT,EAAK,OAAO,UAAU,IAAI,WAAW,CAC7C,CAAK,CACL,CAAC,EAKD,SAASS,GAAiB,CACtBR,IACA,MAAMT,EAAQQ,EAAK,KAAK,SAAS,MAAM,MAAM,OAE7CA,EAAK,OAAO,UAAU,OAAO,WAAW,EAExCT,EAAUC,EAAOS,CAAW,EAAE,KAAKM,GAAQ,CACvC,GAAIA,EAAK,KAAK,SAAW,EACrBH,QACG,CACH,MAAMI,EAASV,EAAcS,EAAK,IAAI,EACtCP,EAAK,QAAQ,mBAAmB,YAAaQ,CAAM,EACnDR,EAAK,OAAO,UAAU,IAAI,WAAW,CAEjD,CAAA,CAAK,CACL"}